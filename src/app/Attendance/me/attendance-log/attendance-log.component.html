<!-- Filters -->
<div class="row-space-between">
  <div>
    <p>Last 30 Days</p>
  </div>
  <div class="filters">
    <div class="filter-block">
      <button class="btn-secondry active">30 DAYS</button>
      <button class="btn-secondry">AUG</button>
      <button class="btn-secondry">JUL</button>
      <button class="btn-secondry">JUN</button>
      <button class="btn-secondry">MAY</button>
      <button class="btn-secondry">APR</button>
      <button class="btn-secondry">MAR</button>
    </div>
  </div>
</div>

<!-- Attendance Grid -->
<ion-grid class="attendance-table">
  <!-- Header -->
  <ion-row class="table-header">
    <ion-col size="2">Date</ion-col>
    <ion-col size="3">Attendance Visual</ion-col>
    <ion-col size="2">Effective Hours</ion-col>
    <ion-col size="2">Gross Hours</ion-col>
    <ion-col size="2">Arrival</ion-col>
    <ion-col size="1">Log</ion-col>
  </ion-row>

  <!-- Rows -->
  <ion-row *ngFor="let log of attendanceLogss.slice().reverse()" class="table-row">
    <ion-col size="2">{{ log.attendance_date }}</ion-col>
    <ion-col size="3">
      <ion-progress-bar [value]="log.progress || 0"></ion-progress-bar>
    </ion-col>
    <ion-col size="2">{{ log.effective || '-' }}</ion-col>
    <ion-col size="2">{{ log.gross || '-' }}</ion-col>
    <ion-col size="2">
      <ion-icon name="checkmark-outline" color="success"></ion-icon>
      {{ log.arrival || '-' }}
    </ion-col>
    <ion-col size="1">
      <ion-icon name="alert-circle-outline" color="warning" (click)="openLogDetails(log)"></ion-icon>
    </ion-col>
  </ion-row>

  <!-- Popover showing detailed attendance log -->
  <ion-popover *ngIf="showPopover" [isOpen]="showPopover" [dismissOnSelect]="false">
    <ng-template>
      <ion-content class="popover-content ion-padding">
        <div class="log-header">
          <h3>Day shift 1</h3>
          <br>
          <p>({{ selectedLog?.attendance_date }})</p>
          <p><strong>9:30 - 18:30</strong></p>
          <br>
        </div>
        
        <!-- <div class="log-section">
          <p class="section-title">Apply Partial Day</p>
          <p class="location">1st Floor SVS Towers</p>
        </div> -->

        <div class="log-section" *ngIf="selectedLog?.records?.length > 0">
          <p class="section-title">Web Clock In</p>
          <div class="time-entries-grid">
            <div *ngFor="let rec of selectedLog.records" class="time-pair">
              <div *ngIf="rec.check_in" class="time-entry clock-in">
                <ion-icon name="arrow-up" class="arrow-in"></ion-icon>
                <span class="time-stamp">{{ rec.check_in }}</span>
              </div>
              <div *ngIf="rec.check_out" class="time-entry clock-out">
                <ion-icon name="arrow-down" class="arrow-out"></ion-icon>
                <span class="time-stamp">{{ rec.check_out }}</span>
              </div>
            </div>
          </div>
        </div>

        <ion-button expand="block" color="medium" (click)="showPopover = false" style="margin-top: 15px;">
          Close
        </ion-button>
      </ion-content>
    </ng-template>
  </ion-popover>

  <!-- Example Week-Off Rows -->
  <ion-row class="table-row weekoff-row">
    <ion-col size="2">Sun, 31 Aug<label>W-OFF</label></ion-col>
    <ion-col size="10" class="text-center">Full day Weekly-off</ion-col>
  </ion-row>

  <ion-row class="table-row weekoff-row">
    <ion-col size="2">Sun, 24 Aug<label>W-OFF</label></ion-col>
    <ion-col size="10" class="text-center">Full day Weekly-off</ion-col>
  </ion-row>
</ion-grid>