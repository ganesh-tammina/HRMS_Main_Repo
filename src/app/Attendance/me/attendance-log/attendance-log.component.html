<!-- Filters -->
<div class="row-space-between">
  <div>
    <p>Last 30 Days</p>
  </div>
  <div class="filters">
    <div class="filter-block">
      <button class="btn-secondry active">30 DAYS</button>
      <button class="btn-secondry">AUG</button>
      <button class="btn-secondry">JUL</button>
      <button class="btn-secondry">JUN</button>
      <button class="btn-secondry">MAY</button>
      <button class="btn-secondry">APR</button>
      <button class="btn-secondry">MAR</button>
    </div>
  </div>
</div>

<div *ngIf="attendanceHistory.length > 0; else noLogs">
  <table>
    <thead>
      <tr>
        <th>Action</th>
        <th>Message</th>
        <th>Actual Check-In</th>
        <th>Shift Check-In</th>
        <th>Late?</th>
        <th>Difference</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let log of attendanceHistory">
        <td>{{ log.attendance_date }}</td>
        <td>{{ log.check_in }}</td>
        <td>{{ log.check_out }}</td>

      </tr>
    </tbody>
  </table>
</div>

<ng-template #noLogs>
  <p>No attendance records yet.</p>
</ng-template>

<ion-grid class="attendance-table">
  <ion-row class="table-header">
    <ion-col size="2">Date</ion-col>
    <ion-col size="3">Attendance Visual</ion-col>
    <ion-col size="2">Effective Hours</ion-col>
    <ion-col size="2">Gross Hours</ion-col>
    <ion-col size="2">Arrival</ion-col>
    <ion-col size="1">Log</ion-col>
  </ion-row>

  <ion-row *ngFor="let log of attendanceHistory" class="table-row">
    <ion-col size="2">{{log.attendance_date}}</ion-col>
    <ion-col size="3">
      <ion-progress-bar [value]="log.progress"></ion-progress-bar>
    </ion-col>
    <ion-col size="2">{{ log.effective }}</ion-col>
    <ion-col size="2">
      {{ log.gross }}
    </ion-col>
    <ion-col size="2">
      <ion-icon name="checkmark-outline" color="success"></ion-icon>
      {{ log.arrival }}
    </ion-col>
    <ion-col size="1">
      <ion-icon id="popover-button" name="alert-circle-outline" color="warning" (click)="openLogDetails(log)">
      </ion-icon>
    </ion-col>
  </ion-row>
  <ion-popover *ngIf="showPopover" [isOpen]="showPopover" trigger="popover-button" [dismissOnSelect]="false">
    <ng-template>
      <ion-content class="popover-content ion-padding">
        <p class="card-title">Day Shift 1( {{ currentDate }})</p>
        <p class="card-title">{{ selectedLog?.details?.shiftTime }}</p>
        <p class="divider"></p>
        <p><strong>Location:</strong></p>
        <p class="card-title">{{ selectedLog?.details?.location }}</p>
        <ion-row class="ion-no-padding">
          <ion-col class="clock-logs" size="6">
            <div class="" *ngFor="let log of attendanceHistory">
              <p>{{log.check_in}}<img src="../../assets/Icons/clock-in.svg" width="12"></p>
              <p>{{log.check_out}}<img src="../../assets/Icons/clock-out.svg" width="12">
              </p>
            </div>
          </ion-col>
        </ion-row>
      </ion-content>
    </ng-template>
  </ion-popover>


  <ion-row class="table-row weekoff-row">
    <ion-col size="2">Sun, 31 Aug<label>W-OFF</label></ion-col>
    <ion-col size="10" class="text-center">Full day Weekly-off</ion-col>

  </ion-row>
  <ion-row class="table-row weekoff-row">
    <ion-col size="2">Sun, 31 Aug<label>W-OFF</label></ion-col>
    <ion-col size="10" class="text-center">Full day Weekly-off</ion-col>

  </ion-row>

</ion-grid>