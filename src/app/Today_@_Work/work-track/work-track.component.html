<ion-content class="ion-padding">
  <div class="manage-main-block">
    <h2>Work Tracking</h2>

 <!-- â­ TABS -->
 <div class="tabs custom-tabs">
  <div [class.active]="activeTab==='daily'" (click)="changeTab('daily')">Daily</div>
  <div [class.active]="activeTab==='weekly'" (click)="changeTab('weekly')">Weekly</div>
  <div [class.active]="activeTab==='monthly'" (click)="changeTab('monthly')">Monthly</div>
</div>


  <!--------------------------------- DAILY --------------------------------->
  <div *ngIf="activeTab==='daily'" class="box animate daily-block">
      <!-- <ion-button id="trigger-button1">Click Me</ion-button>
      <ion-popover trigger="trigger-button1">
          <ng-template>   -->
    <!-- DATE BAR -->
    <div class="date-bar">
      <div class="row-left">
          <p>ğŸ“… <b>Work Date :</b> <span class="date pl-5">{{ selectedDate }}</span></p>
          <p class="total-hours pl-5">( {{dailyTotal}} hrs )</p>  
      </div>          
      <ion-button size="small" shape="round" (click)="openMissedCalendar()">
        Add Missed
      </ion-button>
    </div>

    <div class="calendar-box" *ngIf="showCalendar">
      <ion-datetime presentation="date" [max]="today" [value]="selectedDate" (ionChange)="onDateChange($event)">
      </ion-datetime>
    </div>

    <!-- TECHNOLOGY INPUT -->
    <div class="row-left">
      <div class="glass-item">
        <ion-input [(ngModel)]="techInput" placeholder="Technologies(ex: Angular, Node, Ionic...) "></ion-input>
        <ion-button slot="end" (click)="addTechnology()">Add</ion-button>
      </div>  
      <div class="tech-chips">
        <ion-chip *ngFor="let tech of technologies; let i=index">
          {{tech}}
          <ion-icon name="close-circle" (click)="removeTechnology(i)"></ion-icon>
        </ion-chip>
      </div>
    </div>

    <!-- HOURLY GRID -->
    <div class="hours-grid">

      <div class="hour-row" *ngFor="let h of hours">

        <p class="time"> {{h.start_time}} - {{h.end_time}} </p>

        <ion-textarea *ngIf="h.type==='work'" [(ngModel)]="h.task" placeholder="Describe work done..." aria-required="true">
        </ion-textarea>

        <ion-select *ngIf="h.type==='work'" interface="popover" placeholder="Project" [(ngModel)]="h.project">
          <ion-select-option value="CNS">CNS</ion-select-option>
          <ion-select-option value="CIS">CIS</ion-select-option>
          <ion-select-option value="Nasco">Nasco</ion-select-option>
          <ion-select-option value="COE">COE (Bench)</ion-select-option>
        </ion-select>

        <span class="break-label" *ngIf="h.type==='break'">ğŸ” Break</span>

      </div>

    </div>

    <div class="row-center">
      <ion-button class="primary-btn" (click)="submitDaily()">
        Submit Daily Report
      </ion-button>
  
      <ion-button fill="outline" (click)="exportDaily()">
        Export Daily
      </ion-button>
    </div>
    

    <!-- TOTAL -->
   

    <div class="graph-box">
      <canvas id="dailyChart"></canvas>
    </div>
  <!-- </ng-template>
  </ion-popover> -->
  </div>
  <!--------------------------------- WEEKLY --------------------------------->
  <div *ngIf="activeTab==='weekly'" class="box animate">

    <h2 class="center">ğŸ“Š Weekly Report</h2>

    <div class="graph-box">
      <canvas id="weeklyChart"></canvas>
    </div>

    <ion-button expand="block" (click)="exportWeekly()">Export Weekly</ion-button>

    <div class="center total">
      Weekly Total: {{weeklyTotal}} hrs
    </div>
  </div>

  <!--------------------------------- MONTHLY --------------------------------->
  <div *ngIf="activeTab==='monthly'" class="box animate">

    <h2 class="center">ğŸ“ˆ Monthly Report</h2>

    <div class="graph-box">
      <canvas id="monthlyChart"></canvas>
    </div>

    <ion-button expand="block" (click)="exportMonthly()">Export Monthly</ion-button>

    <div class="center total">
      Monthly Total: {{monthlyTotal}} hrs
    </div>
  </div>
</div>
</ion-content>