<div class="request-card ion-padding" >
  <div class="team-header">
    Employee Leave Requests
  </div>

  <ion-grid class="table">
        <ion-row class="table-header">
            <ion-col size="2">
               Name
            </ion-col>
          <ion-col size="2">
              Leave Type
            </ion-col>
            <ion-col size="2">
               Start Date
              </ion-col>
              <ion-col size="2">
                  End Date
                </ion-col>
              <ion-col size="2">
                 Reason
              </ion-col>
              <ion-col size="1">
                   Status
                </ion-col>
                <ion-col size="1">
                      Actions
                  </ion-col>
          </ion-row>
      <ion-row *ngFor="let req of leaveRequests" class="table-list-row" >
        <ion-col size="2">
            <div>
                <div class="tooltip">
                    <p>{{ req.full_name}}</p>
                    <span class="tooltiptext">{{ req.full_name}}</span>
                  </div>
                
                <p>{{ req.job_title}}</p>
              </div>
        </ion-col>
      <ion-col size="2">
          <p class="badge">{{ req.leave_type }}</p>
        </ion-col>
        <ion-col size="2" class="row-center">
            <p> {{ req.start_date | date:'dd-MM-yyyy'  }}</p>
          </ion-col>
          <ion-col size="2" class="row-center">
              <p>  {{ req.end_date  | date:'dd-MM-yyyy' }}</p>
            </ion-col>
          <ion-col size="2">
              <div class="tooltip">
                  <p> {{ req.remarks }}</p>
                  <span class="tooltiptext"> {{ req.remarks }}</span>
                </div>          
          </ion-col>
          <ion-col size="1">
              <p class="yellow-status"> {{ req.status }}</p>
            </ion-col>
            <ion-col size="1" class="row-center">
                  <button fill="clear" class="approve-btn" (click)="openActionForm(req)"><ion-icon name="ellipsis-vertical-circle-outline"></ion-icon></button>
              </ion-col>
      </ion-row>
    </ion-grid>
  
  <!-- Action Form Popup -->
  <div class="overlay" *ngIf="selectedRequest">
    <div class="form-card">

      <h3>Approve or Reject</h3>

      <form [formGroup]="actionForm" (ngSubmit)="submitDecision()">

        <label>Status</label>
        <select formControlName="status">
          <option value="">-- Select --</option>
          <option value="Accepted">Accept Leave</option>
          <option value="Rejected">Reject Leave</option>
        </select>

        <label>Manager Comment</label>
        <textarea rows="3" formControlName="manager_comment"></textarea>

        <button type="submit" class="submit-btn">Submit</button>
        <button type="button" class="cancel-btn" (click)="closeForm()">Cancel</button>
      </form>

    </div>
  </div>
</div>