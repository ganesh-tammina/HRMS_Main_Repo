<ion-header [translucent]="true">
</ion-header>

<ion-content [fullscreen]="true" class="profile-block">

  <ion-grid class="ion-margin ion-margin-horizontal" *ngFor="let currentemp of currentemp">
    <ion-row>
      <ion-col size="4" class="welcome-block ion-no-padding">
        <ion-card>
          <div class="img-block" id="image-trigger">
            <img [attr.alt]="currentemp.FirstName" [src]="uploadedImageUrl || '../../assets/user.svg'" width="100"
              height="100" />
            <ion-button class="img-button" id="image-trigger">
              <div class="ion-text-center">
                <ion-icon name="camera"></ion-icon>
                <p class="text">upload image</p>
              </div>
            </ion-button>
          </div>

          <!-- modal popup for image uploader -->
          <ion-popover trigger="image-trigger" class="image-popup" triggerAction="click">
            <ng-template>
              <div class="ion-padding">
                <p class="popup-title">Upload profile photo</p>
                <div class="img-border">
                  <img [attr.alt]="currentemp.FirstName" [src]="uploadedImageUrl || '../../assets/user.svg'" width="100"
                    height="100" />
                </div>

                <label class="file-attach">
                  <input type="file" accept="image/*" (change)="onFileSelected($event)">
                  <p>Choose file</p>
                </label>

                <ion-button (click)="uploadProfilePic()" [disabled]="!selectedFile || isUploading"
                  class="primary-btn row-right" type="submit">
                  {{ isUploading ? 'Uploading...' : 'Upload Profile Pic' }}
                </ion-button>
              </div>
            </ng-template>
          </ion-popover>

          <div class="ion-text-center">
            <p class="name">{{currentemp.full_name}}</p>
            <p class="des">{{currentemp.job_title}}</p>
          </div>

          <div class="info-block">
            <div class="row-left">
              <ion-icon name="mail"></ion-icon>
              <p class="pl-5">{{currentemp.work_email}}</p>
            </div>

            <div class="row-left">
              <ion-icon name="location"></ion-icon>
              <p class="pl-5">{{currentemp.location}}</p>
            </div>
          </div>

          <div class="report-block">
            <div>
              <p>Business Unit</p>
              <h6>{{currentemp.business_unit}}</h6>
            </div>
            <div>
              <p>Department</p>
              <h6>{{currentemp.department}}</h6>
            </div>
            <div>
              <p>Reporting Manager</p>
              <h6 class="row-left"> <img [attr.alt]="currentemp.FirstName" src="../../assets/user.svg"
                  width="18" />{{currentemp.reporting_to}}</h6>
            </div>
          </div>
        </ion-card>
      </ion-col>

      <ion-col size="8">
        <!-- Tabs started -->
        <ion-card>
          <ion-tabs class="custom-underline-tabs">
            <ion-tab-bar slot="top">
              <ion-tab-button class="row-center" tab="about">
                <ion-icon name="home"></ion-icon>
                <p>ABOUT</p>
              </ion-tab-button>
              <ion-tab-button class="row-center" tab="profile">
                <ion-icon name="person-circle"></ion-icon>
                <p>PROFILE</p>
              </ion-tab-button>
              <ion-tab-button class="row-center" tab="job">
                <ion-icon name="bag-handle"></ion-icon>
                <p>JOB</p>
              </ion-tab-button>
              <ion-tab-button class="row-center" tab="time">
                <ion-icon name="time"></ion-icon>
                <p>Time</p>
              </ion-tab-button>
              <ion-tab-button class="row-center" tab="documents">
                <ion-icon name="document-attach"></ion-icon>
                <p>Documents</p>
              </ion-tab-button>
              <ion-tab-button class="row-center" tab="assets">
                <ion-icon name="library"></ion-icon>
                <p> Assets</p>
              </ion-tab-button>
            </ion-tab-bar>

            <ion-tab tab="about">
              <app-aboutus [currentemp]="currentemp"></app-aboutus>
            </ion-tab>
            <ion-tab tab="profile">
              <app-profile [currentemp]="currentemp"></app-profile>
            </ion-tab>
            <ion-tab tab="job">
              <app-job-tab [currentemp]="currentemp"></app-job-tab>
            </ion-tab>
            <ion-tab tab="time">
              <app-leave-requests></app-leave-requests>
            </ion-tab>
            <ion-tab tab="documents">
              <!-- <app-document-tab [currentemp]="currentemp"></app-document-tab> -->
            </ion-tab>
            <ion-tab tab="assets">
              <!-- <app-assets-tab [currentemp]="currentemp"></app-assets-tab> -->
            </ion-tab>
          </ion-tabs>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>
